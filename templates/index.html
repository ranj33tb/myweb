{% extends "base.html" %}
{% block content %}
<!DOCTYPE html>
<html lang="en"> 
  <head>
    <meta charset="UTF-8">
    <title>Vehicle Info Lookup</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  </head>
<div class="container">
  <h1><i class="fas fa-car icon"></i> Vehicle Info Lookup</h1>
  <input type="text" id="vehicleNumber" placeholder="Enter Vehicle Number">
  <button id="searchBtn">Search</button>
  <pre id="result">Results will appear here...</pre>
</div>

<script>
document.getElementById("searchBtn").addEventListener("click", async () => {
  const number = document.getElementById("vehicleNumber").value.trim();
  if (!number) {
    alert("Please enter a vehicle number");
    return;
  }
  try {
    const res = await fetch(`/search/${number}`);
    if (!res.ok) throw new Error("HTTP " + res.status);
    const data = await res.json();
    document.getElementById("result").textContent = JSON.stringify(data, null, 2);
  } catch (err) {
    document.getElementById("result").textContent = "‚ùå Error: " + err.message;
  }
});
</script>
{% endblock %}
